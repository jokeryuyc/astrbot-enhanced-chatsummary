# AstrBot 聊天记录总结插件

一个智能的基于 AstrBot 的插件，通过拉取历史聊天记录并调用大模型接口，生成结构化的高质量消息总结。

## ✨ 功能特点

- 一键总结群聊历史记录，提取关键信息
- 智能识别重要通知、讨论话题和有趣互动
- 结构化呈现总结内容，方便快速浏览
- 支持自定义提示词，调整输出风格
- 内置调试模式，方便开发者测试

## 🚀 使用方法

### 基本命令

```
/消息总结 [总结消息数量]
```

**示例：**
```
/消息总结 100
```

表示拉取最近的100条历史聊天记录进行智能总结，从最新的消息开始倒序拉取。

### 参数说明

- `总结消息数量`：必填，仅支持整数，指定要拉取的聊天记录数量（最大支持300条）
- `debug`：可选参数，仅限管理员使用，用于调试输出

**调试模式示例：**
```
/消息总结 50 debug
```

## ⚙️ 配置说明

本插件支持自定义提示词，可以通过修改配置文件来调整总结的风格和内容。

### 配置路径

```
data/config/astrbot_plugin_chatsummary_config.json
```

### 配置项

- `prompt`：提示词内容，用于指导大模型如何总结聊天记录
- `max_records`：最大支持的记录数量
- `extract_image_text`：是否尝试提取图片中的文字
- `debug_mode`：调试模式相关设置

### 默认提示词

插件预置了一份专业的提示词模板，能够对群聊记录进行结构化总结，包括：

- 重要通知提醒
- 讨论话题汇总
- 趣味互动片段
- 热点话题排名
- 全文点评

## 🔧 安装方法

1. 确保你已经安装了 AstrBot
2. 在 AstrBot 配置界面启用本插件
3. 重启 AstrBot 以生效

## 📝 输出示例

```
·讨论话题
  - 话题1：关于AI在教育领域的应用
    - 内容摘要：探讨了AI辅助教学的优缺点；分享了使用ChatGPT进行学习的经验
    - 讨论时间：18:38 - 18:45
  - 话题2：下周活动安排
    - 内容摘要：确定了团建时间和地点；讨论了交通方式
    - 讨论时间：19:02 - 19:15

·趣味互动片段
  -「用户A」：分享了一个编程笑话，引发多人回应
  -「用户B」：发了一个有趣的表情包引发连锁反应

·今日热点话题
  [1] AI技术发展（☆☆☆☆☆）
  - 内容摘要：AI模型的进步；应用场景扩展；潜在的社会影响
  - 讨论时间：18:38 - 19:00
  
  [2] 团队协作（☆☆☆）
  - 内容摘要：远程协作的挑战；项目进度安排；任务分配优化
  - 讨论时间：19:02 - 19:20

·☑全文点评：今日讨论主要围绕AI技术和团队协作展开，体现了群成员对技术和团队建设的关注。
```

## 🤝 支持

如有问题或建议，请提交Issue或加入我们的交流群。

- [AstrBot帮助文档](https://astrbot.app)
- [项目仓库](https://github.com/jokeryuyc/astrbot-enhanced-chatsummary)

## 📄 许可证

本项目采用 GNU Affero General Public License v3.0 开源许可证。

---

Made with ❤️ by laopanmemz and contributors